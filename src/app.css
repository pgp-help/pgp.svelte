/* Import Tailwind CSS v4 */
@import 'tailwindcss';

/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@300;400;500;600;700&display=swap');

/* Configure daisyUI component library with theme options */
@plugin "daisyui" {
	themes:
		corporate-m,
		light --default,
		dark --prefersdark,
		lofi,
		dracula,
		nord,
		bumblebee,
		garden;
}

@plugin "daisyui/theme" {
	name: 'corporate-m';
	default: false;
	prefersdark: false;
	color-scheme: 'light';
	--color-base-100: oklch(100% 0 0);
	--color-base-200: oklch(98% 0 0);
	--color-base-300: oklch(94% 0 0);
	--color-base-content: oklch(22.389% 0.031 278.072);
	--color-accent: oklch(58% 0.158 241.966);
	--color-accent-content: oklch(100% 0 0);
	--color-secondary: oklch(55% 0.046 257.417);
	--color-secondary-content: oklch(100% 0 0);
	--color-primary: oklch(60% 0.118 184.704);
	--color-primary-content: oklch(100% 0 0);
	--color-neutral: oklch(0% 0 0);
	--color-neutral-content: oklch(100% 0 0);
	--color-info: oklch(60% 0.126 221.723);
	--color-info-content: oklch(100% 0 0);
	--color-success: oklch(62% 0.194 149.214);
	--color-success-content: oklch(100% 0 0);
	--color-warning: oklch(85% 0.199 91.936);
	--color-warning-content: oklch(0% 0 0);
	--color-error: oklch(70% 0.191 22.216);
	--color-error-content: oklch(0% 0 0);
	--radius-selector: 0.5rem;
	--radius-field: 0.5rem;
	--radius-box: 0.75rem;
	--size-selector: 0.25rem;
	--size-field: 0.25rem;
	--border: 1px;
	--depth: 0;
	--noise: 0;
}

/* 
 * Global font settings
 */
:root {
	--font-sans: 'Inter', sans-serif;
	--font-mono: 'JetBrains Mono', monospace;
}

body {
	font-family: var(--font-sans);
}

.font-mono {
	font-family: var(--font-mono);
}

.fieldset-legend {
	@apply text-sm font-semibold text-base-content flex items-center gap-2;
}

/* 
 * Use Tailwind CSS v4's built-in "container" utility class.
 * Tailwind's container automatically:
 *   - Centers content horizontally
 *   - Has responsive max-widths at different breakpoints
 *   - Handles padding intelligently
 * This is better than custom utilities because it's battle-tested and responsive.
 */

@layer components {
	/* These are mostly used by the guide now. Could retire / localise them */

	/* Primary emphasis style - for hero sections and main headlines */
	.emphasis-primary {
		@apply bg-primary/10 card-border;
	}

	/* Secondary emphasis style - for important content cards */
	.emphasis-secondary {
		@apply bg-gradient-to-r from-primary/5 to-secondary/5 shadow-xl border border-primary/20 rounded-2xl;
	}

	/* Accent emphasis style - for special highlighted content */
	.emphasis-accent {
		@apply bg-gradient-to-r from-primary/5 to-secondary/5 shadow-xl border-2 border-primary rounded-2xl;
	}

	/* Content section - standard container styling */
	.content-section {
		@apply bg-base-100 shadow-xl rounded-2xl;
	}

	/* Navigation bar - clean header style */
	.nav-bar {
		@apply bg-gradient-to-r from-primary/5 to-secondary/5 shadow-lg border-b border-primary/10;
	}
}

@layer components {
	/* Used in the key list */

	.card-selectable {
		@apply card card-border border-base-300 bg-base-100 transition;
		cursor: pointer;
	}

	.card-selectable:hover,
	.card-selectable:focus-within {
		@apply bg-primary/10 shadow-sm;
	}

	.card-selectable:focus-within {
		box-shadow: 0 0 0 2px hsl(var(--p) / 0.35);
	}

	.card-selectable.card-selected {
		@apply border-primary bg-primary/10;
	}
}

/* 
 * Custom utility for code/monospace textareas.
 * Combines common textarea styling for PGP keys and encrypted messages.
 */
@utility textarea-code {
	@apply font-mono text-sm;
	&:read-only {
		@apply bg-base-300 text-base-content/70;
	}
}

/* 
 * Standardized floating action button.
 * Used in MiniActionButton.svelte
 */
@utility btn-mini {
	@apply btn btn-sm btn-circle;
}

/* Make FAB expand downward instead of upward */
@utility fab-down {
	top: 1rem;
	bottom: unset;
	flex-direction: column;

	& .fab-close,
	& .fab-main-action {
		top: 0;
		bottom: unset;
	}

	/* Flower layout adjustments for downward expansion */
	&.fab-flower {
		/* 3 buttons - single button at bottom-left */
		&:has(:nth-child(3)) {
			> :nth-child(3) {
				--degree: 225deg; /* Bottom-left diagonal */
			}
		}

		/* 4 buttons - spread across left and bottom */
		&:has(:nth-child(4)) {
			> :nth-child(3) {
				--degree: 195deg; /* Left-bottom */
			}
			> :nth-child(4) {
				--degree: 255deg; /* Bottom-right */
			}
		}

		/* 5 buttons - quarter circle from left to bottom */
		&:has(:nth-child(5)) {
			> :nth-child(3) {
				--degree: 180deg;
			} /* Straight left */
			> :nth-child(4) {
				--degree: 225deg;
			} /* Bottom-left diagonal */
			> :nth-child(5) {
				--degree: 270deg;
			} /* Straight down */
		}

		/* 6 buttons - full quarter circle */
		&:has(:nth-child(6)) {
			> :nth-child(3) {
				--degree: 180deg;
			} /* Left */
			> :nth-child(4) {
				--degree: 210deg;
			} /* Left-bottom */
			> :nth-child(5) {
				--degree: 240deg;
			} /* Bottom-left */
			> :nth-child(6) {
				--degree: 270deg;
			} /* Bottom */
		}
	}
}

@utility tooltip-lean {
	--hover-offset: 0px;

	&:hover {
		--hover-offset: 3px;
	}

	/* Just add a small translation on top of existing positioning */
	&.tooltip-left {
		& > .tooltip-content,
		&[data-tip]:before,
		&:after {
			translate: var(--hover-offset) 0;
		}
	}

	&.tooltip-right {
		& > .tooltip-content,
		&[data-tip]:before,
		&:after {
			translate: calc(-1 * var(--hover-offset)) 0;
		}
	}

	&.tooltip-top {
		& > .tooltip-content,
		&[data-tip]:before,
		&:after {
			translate: 0 var(--hover-offset);
		}
	}

	&:not(.tooltip-top):not(.tooltip-left):not(.tooltip-right) {
		& > .tooltip-content,
		&[data-tip]:before,
		&:after {
			translate: 0 calc(-1 * var(--hover-offset));
		}
	}
}

/* Show all tooltips in the group when hovering over any button */
.group:hover .tooltip::before,
.group:hover .tooltip::after {
	opacity: 1;
	visibility: visible;
	pointer-events: auto;
}
